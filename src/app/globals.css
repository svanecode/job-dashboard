@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base dark theme */
body {
  background: #0B0F14;
}

/* Prevent horizontal scroll on mobile */
html, body {
  overflow-x: hidden;
  max-width: 100vw;
  width: 100%;
  position: relative;
}

/* Force all elements to respect viewport width */
* {
  max-width: 100vw;
  box-sizing: border-box;
}

/* Prevent any element from having a minimum width - only on mobile */
@media (max-width: 1023px) {
  * {
    min-width: 0 !important;
  }
}

/* Additional overflow protection */
body {
  overflow-x: hidden !important;
}

/* Ensure viewport width is respected */
html {
  overflow-x: hidden !important;
  width: 100vw;
  max-width: 100vw;
}

/* Mobile gutters and safe area support */
:root {
  --gutter: 12px;
  --fab-offset: 96px; /* approx FAB + margin */
}

@media (min-width: 640px) {
  :root {
    --gutter: 16px;
  }
}

.container-mobile {
  padding-left: calc(var(--gutter) + env(safe-area-inset-left));
  padding-right: calc(var(--gutter) + env(safe-area-inset-right));
  overflow-x: hidden;
  width: 100%;
  box-sizing: border-box;
  position: relative;
}

/* Desktop override for container-mobile */
@media (min-width: 768px) {
  .container-mobile {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
  }
}

/* Mobile-only max-width restriction */
@media (max-width: 1023px) {
  .container-mobile {
    max-width: 100vw;
  }
}

.with-fab-bottom {
  padding-bottom: calc(var(--fab-offset) + env(safe-area-inset-bottom));
}

/* Remove FAB bottom padding on desktop */
@media (min-width: 768px) {
  .with-fab-bottom {
    padding-bottom: 0;
  }
}

/* Radial gradient background */
.bg-radial {
  background:
    radial-gradient(800px 400px at 20% -10%, rgba(24, 119, 242, 0.06), transparent 60%),
    radial-gradient(600px 300px at 80% 0%, rgba(0, 255, 171, 0.06), transparent 65%);
}

/* Grain/noise overlay */
.noise:before {
  content: "";
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='0.035'/></svg>");
  opacity: 0.05;
  mix-blend-mode: soft-light;
  pointer-events: none;
  z-index: 1;
}

/* Utility classes */
@layer components {
  .card {
    @apply rounded-2xl border border-white/10 bg-panel backdrop-blur-md shadow-[0_0_0_1px_rgba(255,255,255,0.03)] hover:shadow-[0_0_0_1px_rgba(255,255,255,0.06)] transition-all duration-200 overflow-hidden;
  }

  .card-mobile {
    @apply rounded-2xl border border-white/10 bg-white/5 backdrop-blur-md overflow-hidden;
  }

  .soft-divider {
    @apply border-t border-white/10;
  }

  /* Focus states */
  .focus-ring {
    
  }

  /* Glassmorphism inputs */
  .glass-input {
    @apply bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-slate-200 placeholder-slate-400 focus-ring hover:border-white/20 transition-colors;
  }

  /* Touch targets for mobile */
  .tap-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Remove tap highlight on mobile */
  .tap-highlight-none {
    -webkit-tap-highlight-color: transparent;
  }

  /* Text balance for better readability */
  .text-balance {
    text-wrap: balance;
  }

  /* Tabular numbers for dates */
  .tabnums {
    font-variant-numeric: tabular-nums;
  }

  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Score badges */
  .score-badge-3 {
    @apply inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs bg-emerald-400/10 text-emerald-300 ring-1 ring-emerald-300/20;
  }

  .score-badge-2 {
    @apply inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs bg-amber-400/10 text-amber-300 ring-1 ring-amber-300/20;
  }

  .score-badge-1 {
    @apply inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs bg-slate-400/10 text-slate-300 ring-1 ring-slate-300/20;
  }

  .score-badge-0 {
    @apply inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs bg-rose-400/10 text-rose-300 ring-1 ring-rose-300/20;
  }
}

/* Line clamp utilities */
.line-clamp-1 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
}

/* Premium cursor visuals */
.cursor-dot, .cursor-ring {
  position: fixed; pointer-events: none; z-index: 9999; transition: transform .12s ease, opacity .2s;
}
.cursor-dot  { width:6px; height:6px; border-radius:9999px; background:#fff; opacity:.9; }
.cursor-ring { width:28px; height:28px; border:1px solid rgba(255,255,255,.25); border-radius:9999px; }
.cursor-ring--active { transform: scale(.85); border-color: rgba(99,102,241,.55); box-shadow: 0 0 0 2px rgba(99,102,241,.15) inset; }

@media (prefers-reduced-motion: reduce){
  .cursor-dot,.cursor-ring{ display:none; }
}

/* Keyboard focus helper */
.focusable:focus-visible { outline: 2px solid rgba(99,102,241,.8); outline-offset: 3px; }

.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
}

.line-clamp-3 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
}

.line-clamp-4 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 4;
}

.line-clamp-5 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 5;
}

.line-clamp-6 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 6;
}

.line-clamp-8 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 8;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Utility hvis vi vil bruge mask fade andre steder */
.mask-fade-top {
  -webkit-mask-image: linear-gradient(to top, black, transparent);
          mask-image: linear-gradient(to top, black, transparent);
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Ensure flex items can shrink - only on mobile */
@media (max-width: 1023px) {
  .flex {
    min-width: 0;
  }

  .flex > * {
    min-width: 0;
    flex-shrink: 1;
  }

  /* Ensure grid items can shrink */
  .grid > * {
    min-width: 0;
  }

  /* Ensure all text elements can wrap */
  p, span, div, h1, h2, h3, h4, h5, h6 {
    word-wrap: break-word;
    overflow-wrap: break-word;
  }
}
